<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>

<body>
    <header>
        <h1>Minha Lista de Tarefas</h1>
        <p id="funcionamento">Clique duas vezes em um item para marcá-lo como completo</p>
    </header>
    <main id="main">
        <section id="first-section"></section>
        <section id="second-section"></section>
        <section id="third-section"></section>
    </main>
    <script>
        let arrayToDo = [];
        function createElementFirstSection() {
            // 3 - Adicione um input com o id="texto-tarefa" onde a pessoa usuária poderá digitar o nome do item que deseja adicionar à lista.
            function createInputTodo() {
                let parent = document.getElementById('first-section');
                let inputTodo = document.createElement('input');
                inputTodo.id = 'texto-tarefa';
                inputTodo.type = 'text';
                inputTodo.placeholder = 'Digite o nome da tarefa';
                parent.appendChild(inputTodo);
            }
            createInputTodo();
            // 4- Adicione uma lista ordenada de tarefas com o id="lista-tarefas"
            function createOl() {
                let parent = document.getElementById('first-section');
                let ol = document.createElement('ol');
                ol.id = 'lista-tarefas';
                parent.appendChild(ol);
            }
            createOl();
            // 5 - Adicione um botão com id="criar-tarefa" e, ao clicar nesse botão, um novo item deverá ser criado ao final da lista e o texto do input deve ser limpo
            function buttonCreateTodo() {
                let parent = document.getElementById('first-section');
                let button = document.createElement('button');
                button.id = 'criar-tarefa';
                button.innerHTML = 'Criar Tarefa';
                parent.appendChild(button);
            }
            buttonCreateTodo();
        }
        createElementFirstSection();
        /*
        5 - Adicione um botão com id="criar-tarefa" e, ao clicar nesse botão, um novo item deverá ser criado ao final da lista e o texto do input deve ser limpo
        6 - Ordene os itens da lista de tarefas por ordem de criação
        */
        function captureCreateTodoList() {
            let inputElement = document.getElementById('texto-tarefa');
            let buttonElement = document.getElementById('criar-tarefa');
            buttonElement.addEventListener('click', function () {
                let text = inputElement.value;
                let li = document.createElement('li');
                li.innerHTML = text;
                let ol = document.getElementById('lista-tarefas');
                ol.appendChild(li);
                inputElement.value = '';
            });
        }
        captureCreateTodoList();
        //7 - Clicar em um item da lista deve alterar a cor de fundo do item para cinza rgb(128,128,128)
        //8 - Não deve ser possível selecionar mais de um elemento da lista ao mesmo tempo
        function clickChangeColor() {
            let listaTarefas = document.getElementById('lista-tarefas');
            listaTarefas.addEventListener('click', function (event) {
                let tempElement = document.getElementsByTagName('li');
                for (let ind of tempElement) {
                    ind.style = 'background-color:';
                }
                let target = event.target;
                if (target.tagName === 'LI') {
                    target.style.backgroundColor = 'rgb(128,128,128)';
                }
            });
        }
        clickChangeColor();
        /*
         9 - Clicar duas vezes em um item, faz com que ele seja riscado, indicando que foi completo. Deve ser possível desfazer essa ação clicando novamente duas vezes no item
    ✓ Será verificado que, antes da ação ser disparada, o elemento adicionado à lista não tem nem a classe `completed` nem o estilo `line-through solid rgb(0, 0, 0)`
    1) Será verificado que a ação pedida é disparada mediante duplo clique no elemento da lista e que os elementos da lista completos tem em si a classe `completed` e a propriedade `text-decoration` com o valor `line-through solid rgb(0, 0, 0)`
    2) Será verificado que, com um segundo duplo clique, um elemento completo deixa de sê-lo
 */
        function doubleClick() {
            let listaTarefas = document.getElementById('lista-tarefas');
            listaTarefas.addEventListener('dblclick', function (event) {
                let target = event.target;
                if (target.tagName === 'LI') {
                    target.classList.value === "completed" ? target.classList.remove('completed') : target.classList.add('completed');
                    console.log(target);
                }
            });
        }
        doubleClick();

        /* 10 - Adicione um botão com id="apaga-tudo" que quando clicado deve apagar todos os itens da lista
    1) Será verificado que existe um elemento `button` com o id `apaga-tudo`
    2) Será verificado que, dado que uma lista possui tarefas, um clique no botão a deixa vazia
*/
        function buttonDeleteAll() {
            let parent = document.getElementById('third-section');
            let button = document.createElement('button');
            button.id = 'apaga-tudo';
            button.innerHTML = 'Apagar Tudo';
            parent.appendChild(button);

            function deleteAll() {
                let buttonElement = document.getElementById('apaga-tudo');
                buttonElement.addEventListener('click', function () {
                    let listaTarefas = document.getElementById('lista-tarefas');
                    listaTarefas.innerHTML = '';
                });
            }
            deleteAll();
        }
        buttonDeleteAll();
        /*11 - Adicione um botão com id="remover-finalizados" que quando clicado remove **somente** os elementos finalizados da sua lista
    1) Será verificado que existe um elemento `button` com o id `remover-finalizados`
    2) Será verificado que, ao clicar no botão, todos os elementos marcados como feitos são removidos da lista*/
        function buttonDeleteFinishedTasks() {
            let parent = document.getElementById('third-section');
            let button = document.createElement('button');
            button.id = 'remover-finalizados';
            button.innerHTML = 'Remover Finalizados';
            parent.appendChild(button);

            function deleteFinishedTasks() {
                let buttonElement = document.getElementById('remover-finalizados');
                buttonElement.addEventListener('click', function () {
                    let toDoList = document.getElementById('lista-tarefas');
                    let tempElement = document.querySelectorAll('.completed');
                    for (let i = 0; i < tempElement.length; i += 1) {
                        toDoList.removeChild(tempElement[i]);
                    }
                });
            }
            deleteFinishedTasks();
        }
        buttonDeleteFinishedTasks();
    </script>
</body>

</html>